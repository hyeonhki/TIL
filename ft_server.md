지식 전무

## ft_server
- 시스템 관리 개념을 소개하기 위한 과제
- Docker 기술을 학습하고 완전한 웹 서버 구축
- 추후 ft_service와 이어지는 부분이 있다.

### ft_server 서브젝트 설명
- LEMP 스택 : 동적 웹 어플리케이션을 구현하기 위해 피룡한 Linux + Nginx + MySQL + PHP을 모아서 부르는 단어인데 서브젝트에서 이걸 요구한다.
- Docker container 안에 __Nginx__ 웹 서버를 설치할 것
- container의 OS는 __Debian Buster__ 일 것
- 연동해야할 서비스
  - wordpress
  - phpMyAdmin
  - MySQL
- SSL 프로토콜을 사용해야 한다
- URL redirection
- autoindex


+ 알아듣기 쉽게 설명..
###📚 전반적인 설명
<img src= "https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcjYbCv%2FbtqC4t6LHE2%2FWqu39thIjmjhnvnqzh6Ck0%2Fimg.jpg">
####1. 도커
  - __설명__ : 기존의 하드웨어 스택을 가상화하는 가상 머신과 다르게, 컨테이너 방식은 운영체제 수준에서 가상화를 실시하고 다수의 컨테이너는 OS 커널에서 직접구동한다. 컨테이너를 통해 프로세스를 격리해서 실행하고 관리하며, 효율적으로 이미지(=특정 프로세스의 실행환경, 여기서는 웹서버)를 구축할 수 있도록 해준다.
  - __장점__ : 이러한 방식은 시작이 훨씬 빠르고 운영체제 전체 부팅보다 메모리를 훨씬 적게 차지한다. 이러한 실행환경을 
  - __요약__ : 쉽게 말해 특정 프로세스의 실행환경, 이 과제에서는 웹서버를 효율적으로 저장하고 관리할 수 있는 플랫폼.

__1.1 컨테이너__
- 가상화 기술의 하나로 격리된 공간에서 프로세스를 동작하는 기술
- 여러 개의 컨테이너(서버 등의 프로세스 실행환경)를 하나의 기기에서 실행시킬 수 있으면서 메모리를 덜 먹는 방식이 된다.

__1.2 이미지__
- 이미지는 컨테이너 실행에 필요한 파일과 설정값 등을 포함하고 있는 것.
- 컨테이너를 실행한 상태가 이미지이며, 추가되거나 변하는 값은 컨테이너에 저장된다.
- 한 이미지에서 여러 컨테이너 생성이 가능하다.
- __요약__ : 따라서, 실행환경을 구축함에 있어서 새로 뭐 이것저것 설치할 것 없이 한 번 만들어 놓은 이미지로 컨테이너를 생성해서 서버에서 추가하면 되는 것!

### 2. 데비안 (Debian Buster)
- 우분투와 같은 리눅스 OS 종류 중 하나.(= 서브젝트에서 사용하라 명시)
- 안정성을 중시하는 OS라 많이 사용한다고 한다.

### 3. Nginx
- 엔진엑스는 무료로 제공되는 오픈소스 웹 서버 프로그램
- 웹 서버는 클라이언트로부터 요청이 발생했을 때 요청에 맞는 정적콘테츠를 보내주는 역할
- http의 웹 서버의 역할, proxy 서버의 역할도 가능
- 엔진엑스 서버에 SSL, autoindex 등 설치
  - 웹 서버가 하는 일
  1. 커넥션을 맺는다
  2. 요청을 받는다
  3. 요청을 처리한다
  4. 리소스에 접근한다
  5. 응답을 만든다
  6. 응답을 보낸다
  7. 트랙잭션을 로그로 남긴다

### 4. MySQL
- 오픈소스 관계형 데이터베이스 관리 시스템
- SQL은 쉽게 말해 웹사이트에서 데이터베이스 저장된 여러 데이터들을 조작하고 조회하는 걸 가능하게 해주는 프로그래밍언어 (ex. 로그인 기능 활성화를 위해 비밀번호가 담긴 데이버테이스의 데이터를 관리)
- 관계형 데이터베이스 쉽게 말해 테이블 형태로 관리되는 데이터의 집합
- 같은 종류의 관계성으로 연결해두고 쉽게 접근할 수 있게 하는 느낌(분류?)
- 결론적으로 MYSQL은 관계형 데이터베이스를 생성하고 관리할 수 있도록 도와주는 프로그램이라고 한다.

### 5. phpMyAdmin
- php를 기반으로 생성된 __MYSQL의 GUI로서__ 웹에서 실행할 수 있는 프로그램
  - __php : 서버 사이드 스크립트 언어__
- 데이터베이스를 GUI로 편하게 관리할 수 있도록 도와주는 서비스

### 6. Wordpress
- WordPress는 CMS(Content Management System)의 일종이다.
- 말 그대로 컨테츠를 관리하는 시스템
- 프론트엔드를 담당한다고 하면 된다.
#### 7. Docker Hub?
- 도커 이밎의 용량이 크기에 Docker hub가 무료로 관리
- 공개된 이미지를 다운받거나 저장소를 직접만들어 관리가 가능하다
#### 8. Dockerfile?
- Dockerfile은 필요한 최소한의 패키지를 설치하고 동작하기 위한 자신만의 설정을 담은 파일.
이 파일로 이미지를 빌드하게 된다.
- 패키지 설치, 환경 변수 변경, 설정 파일 변경등의 다양한 작업을 컨테이너를 만들고 설정을 적용할 필요없이 dockerfile을 통해 적용 가능.




#### ft_server의 전체 구현

## 배경지식
### 1. 도커(Docker)
#### - 도커란?
- 도커는 __컨테이너 기반의 오픈소스 가상화 플랫폼__ 이다.
- 서버에서 이야기하는 컨테이너는 다양한 프로그램, 실행환경을 컨테이너로 추상화하고 동일한 인터페이스르 제공하여 프로그램의 배포 및 관리를 단순하게 해준다.
- 백엔드 프로그램, 데이터베이스 서버, 메세지 큐 등 어떤 프로그램도 컨테이너로 추상화할 수 있고 어디든 실행할 수 있다.
#### - 컨테이너?
- 컨테이너는 격리된 공간에서 프로세스가 동작하는 기술.
- 가상화 기술의 하나로, 기존의 OS 가상화의 사용은 사용법은 간단하지만 무겁고 느려서 운영환경에선 사용할 수 없는 단점이 있는데 이러한 상황을 CPU의 가상화기술(HVM)을 이용한 KVM(Kernal-based Virtual Machine)과 반가상화 방식(Paravirtualization)의 Xen으로 성능 향상 및 개선.
- 성능문제를 개선하기 위해 프로세스를 격리하는 방식이 등장.
- 컨테이너는 하드웨어를 분리하지 않고 하나의 머신 위에서 동작하며 OS커널도 공유한다.
#### - 이미지?
- 도커에서 가장 중요한 개념인 컨테이너와 함께 이미지라는 개념.
- 이미지는 컨테이너 실행에 필요한 파일과 설정값등을 포함하고 있는 것으로 상태값을 가지지 않고 변하지 않는다.
- 컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장된다.
- 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 이것저것 설치할 필요가 없다. 새로운 서버가 추가되면 미리 만들어 놓은 이미지를 다운받고 컨테이너를 생성만 하면 되는 것.
#### - Docker Hub?
- 도커 이밎의 용량이 크기에 Docker hub가 무료로 관리
- 공개된 이미지를 다운받거나 저장소를 직접만들어 관리가 가능하다
#### - Dockerfile?
- Dockerfile은 필요한 최소한의 패키지를 설치하고 동작하기 위한 자신만의 설정을 담은 파일.
이 파일로 이미지를 빌드하게 된다.
- 패키지 설치, 환경 변수 변경, 설정 파일 변경등의 다양한 작업을 컨테이너를 만들고 설정을 적용할 필요없이 dockerfile을 통해 적용 가능.
- 명령어의 종류
  - from : 베이스 이미지 지정
  - ...


### 2. 데비안(Devian) / Debian Buster (OS)
- 데비안은 우분투 같은 리눅스 OS 종류 중 하나로, 우분처럼 APT를 패키지 및 소프트웨어 관리자로 사용하고 있다.
- 안정성을 매우 중시하는 리눅스 배포판 => 안정성이 중요한 서버에서 인기

### 3. Nginx
- 엔진엑스는 무료로 제공되는 오픈소스 웹 서버 프로그램
- 웹 서버는 클라이언트로부터 요청이 발생했을 때 요청에 맞는 정적 콘테츠를 보내주는 역할을 한다.
- 규모가 작은 서비스이면서 정적 데이터 처리가 많은 서비스에 적합한 프로그램

### + 웹 서버?

### 4. MYSQL
- 오픈소스 관계형 데이터베이스 관리 시스템(위키피디아)
- SQL은 쉽게 말해 웹사이트에서 데이터베이스 저장된 여러 데이터들을 조작하고 조회하는 걸 가능하게 해주는 프로그래밍언어 (ex. 로그인 기능 활성화를 위해 비밀번호가 담긴 데이버테이스의 데이터를 관리)
- 관계형 데이터베이스 쉽게 말해 테이블 형태로 관리되는 데이터의 집합
- 같은 종류의 관계성으로 연결해두고 쉽게 접근할 수 있게 하는 느낌(분류?)
- 결론적으로 MYSQL은 관계형 데이터베이스를 생성하고 관리할 수 있도록 도와주는 프로그램이라고 한다.

### 5. phpMyAdmin
- php를 기반으로 생성된 __MYSQL의 GUI로서__ 웹에서 실행할 수 있는 프로그램
  - __php : 서버 사이드 스크립트 언어__
- 데이터베이스를 GUI로 편하게 관리할 수 있도록 도와주는 서비스
- __데비안에서 phpMyAdmin이 커맨드 라인 install로는 설치되지 않는다__
  #### 설치방법
  - https://stitchcoding.tistory.com/2

### 6. Wordpress
- 워드프레스틑 .org와 .com 두 가지로 나뉜다.

## 구현 순서 및 가이드라인
### 0. 도커 설치 및 주요 명령어 확인
#### 클러스터
  - 클러스터 사용시 런치패드에서 'Managed Software Center'를 이용해 설치한다.
  - 용량부족으로 du -d 1  -h | sort -h 를 통해 폴더별 용량 확인하고 클러스터에서 제거
  - 42toolbox를 이용해서 도커 실행

#### 맥(M1)
  - 실리콘 테크 프리뷰 버전 다운
### 1.Docker이미지로 debian 환경 만들고 접속해보기
1. docker pull debian:buster
2. docker images 로 데비안 이미지 생성 확인
### 2.nginx 설치하고 로컬호스트에서 접속해보기(docker ### port 설정)
### 3. Nginx에 php실행시켜 띄워보기(php설치 및 nginx conf 설정)
### 4.mysql실행해보기(db를 하나 만들어보기)
### 5.phpmyadmin 접속할수 있게 설정해보기(설치 및 conf 설정)
### 6.wordpress 접속할수 있게 설정해보기(설치 및 conf 설정)
### 7.wordpress에 db적용시켜보기
### 8.지금까지 해온걸 dockerfile로 자동화 시키기

## 출처 및 참조
>- https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcjYbCv%2FbtqC4t6LHE2%2FWqu39thIjmjhnvnqzh6Ck0%2Fimg.jpg (이미지 출처 1)
>- https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html (도커란 무엇인가)
>- https://nirsa.tistory.com/63 (도커파일 개념, 명령어, 이미지빌드)
>- https://velog.io/@hidaehyunlee/ftserver-%EC%84%A0%ED%96%89%EC%A7%80%EC%8B%9D-Docker-Debian-Buster-Nginx- (hidaehyunlee)